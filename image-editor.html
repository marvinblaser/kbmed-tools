<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Éditeur d'Images</title>

    <!-- Styles partagés de votre site (pour la sidebar, etc.) -->
    <link rel="stylesheet" href="css/style.css" />
    <!-- Styles spécifiques au nouveau design de l'éditeur -->
    <link rel="stylesheet" href="css/editor-styles.css" />

    <!-- Librairies externes requises pour cette page -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.css"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.js"></script>
  </head>
  <body>
    <!-- Le header/sidebar sera injecté ici par shared.js -->
    <div id="header-container"></div>

    <!-- Le contenu principal de la page -->
    <main>
      <h1 id="editor-title">Éditeur d'images</h1>

      <div id="main-controls" class="editor-header">
        <div class="header-left">
          <label for="image-loader" class="btn">
            Importer un fichier
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"
              />
            </svg>
          </label>
          <!-- L'attribut 'accept' filtre les fichiers -->
          <input
            type="file"
            id="image-loader"
            class="hidden"
            accept="image/*"
          />
        </div>
        <div class="header-right">
          <button id="crop-tool-btn" class="btn icon-btn" title="Rogner">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M7.5 3.75H6A2.25 2.25 0 0 0 3.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0 1 20.25 6v1.5m0 9V18A2.25 2.25 0 0 1 18 20.25h-1.5m-9 0H6A2.25 2.25 0 0 1 3.75 18v-1.5M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
              />
            </svg>
          </button>
          <button id="undo-btn" class="btn icon-btn" title="Annuler" disabled>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"
              />
            </svg>
          </button>
          <button id="text-tool-btn" class="btn icon-btn" title="Ajouter du texte">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M7.5 3v18M16.5 3v18M3 8.25h18M3 15.75h18"
              />
            </svg>
          </button>
          <button id="reset-btn" class="btn icon-btn" title="Réinitialiser">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 11.667 0l3.181-3.183m-11.667-11.667a8.25 8.25 0 0 0-11.667 0l-3.181 3.183m11.667 0-3.181-3.183"
              />
            </svg>
          </button>
          <button
            id="delete-btn"
            class="btn icon-btn danger-bg"
            title="Supprimer la sélection"
            disabled
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="#ef4444"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"
              />
            </svg>
          </button>
        </div>
      </div>

      <div id="image-container">
        <img id="image-display" src="" alt="" />
      </div>

      <div class="actions-footer">
        <div id="crop-actions" class="hidden">
          <button id="confirm-crop-btn" class="btn btn-success">
            Confirmer
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="m4.5 12.75 6 6 9-13.5"
              />
            </svg>
          </button>
          <button id="cancel-crop-btn" class="btn btn-danger">
            Annuler
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M6 18 18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>
        <div id="download-wrapper">
          <button id="download-btn" class="btn btn-primary">
            Télécharger l'image
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"
              />
            </svg>
          </button>
        </div>
      </div>
    </main>

    <!-- Panneau de texte flottant -->
    <div id="text-panel" class="hidden">
      <div class="panel-header">
        <h3>TEXTE</h3>
        <button id="close-text-panel-btn" class="btn icon-btn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M6 18 18 6M6 6l12 12"
            />
          </svg>
        </button>
      </div>
      <div class="panel-body">
        <div>
          <label for="text-panel-input">Texte à insérer :</label>
          <input
            type="text"
            id="text-panel-input"
            placeholder="Votre texte ici..."
            />
            <button id="add-text-btn" class="btn btn-primary">Ajouter le texte</button>
        </div>
        <div>
          <label>Couleur du fond :</label>
          <div class="color-picker-wrapper">
            <input type="color" id="text-panel-color" value="#FFFFFF" />
            <span>Cliquez pour changer</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts de votre application -->
    <script src="js/shared.js"></script>
    <script src="js/image-editor.js"></script>
  </body>
</html>